global
    log /dev/log local0
    stats socket /run/haproxy/admin.sock mode 660 level admin

defaults
    log global
    mode http
    option httplog
    timeout connect 10s
    timeout client 30s
    timeout server 30s

frontend www-frontend
    bind *:80
    bind *:443 ssl crt /etc/letsencrypt/live/www.aouanelotfi.tech/fullchain.pem
    http-request redirect scheme https unless { ssl_fc }
    http-request set-header X-Forwarded-Proto https
    default_backend www-backend

backend www-backend
    balance roundrobin
    server 347371-web-01 52.91.120.130:80 check
    server 347371-web-02 54.234.40.94:80 check

